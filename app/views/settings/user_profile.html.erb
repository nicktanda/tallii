<div class="mx-4 text-white space-y-4 mt-12">
  <div class="flex space-x-4">
    <%= link_to settings_path do %>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
      </svg>
    <% end %>
    <div class="flex items-center space-x-2 pb-8">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-10 h-10 p-1 bg-white text-black rounded-full">
        <path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z" clip-rule="evenodd" />
      </svg>
      <div class="text-white text-4xl font-thin">Edit Profile</div>
    </div>
  </div>
  <%= form_for current_user, url: update_user_path(current_user) do |f| %>
    <div class="space-y-4 text-left">
      <% if current_user.images&.order(:created_at)&.first&.image.present? %>
        <img src="<%= url_for(current_user.images.order(:created_at).first.image) %>" alt="<%= current_user.first_name %>" class="rounded-2xl max-h-80 w-full flex flex-col justify-end mb-8">
      <% end %>
      <div>
        <%= f.label :first_name, class: "text-xl mb-2 font-thin" %>
        <%= f.text_field :first_name, required: true, class: "bg-black text-white border-x-0 border-t-0 w-full text-xl" %>
      </div>
      <div>
        <%= f.label :last_name, class: "text-xl mb-2 font-thin" %>
        <%= f.text_field :last_name, required: true, class: "bg-black text-white border-x-0 border-t-0 w-full text-xl" %>
      </div>
      <div>
        <%= f.label :email, class: "text-xl mb-2 font-thin" %>
        <%= f.email_field :email, required: true, class: "bg-black text-white border-x-0 border-t-0 w-full text-xl" %>
      </div>
      <div>
        <%= f.label :phone, class: "text-xl mb-2 font-thin" %>
        <%= f.telephone_field :phone, required: true, class: "bg-black text-white border-x-0 border-t-0 w-full text-xl" %>
      </div>
      <div>
        <%= f.label :weight, class: "text-xl mb-2 font-thin" %>
        <%= f.number_field :weight, required: true, class: "bg-black text-white border-x-0 border-t-0 w-full text-xl" %>
      </div>
      <div>
        <%= f.label :address, class: "text-xl mb-2 font-thin" %>
        <%= f.text_field :address, required: true, class: "bg-black text-white border-x-0 border-t-0 w-full text-xl" %>
      </div>
      <div>
        <%= f.label :city, class: "text-xl mb-2 font-thin" %>
        <%= f.text_field :city, required: true, class: "bg-black text-white border-x-0 border-t-0 w-full text-xl" %>
      </div>
      <div>
        <%= f.label :postcode, class: "text-xl mb-2 font-thin" %>
        <%= f.text_field :postcode, required: true, class: "bg-black text-white border-x-0 border-t-0 w-full text-xl" %>
      </div>
      <div class="w-full mb-4 text-xl text-white">
        <%= f.label :image, "Profile Picture", class: "font-thin" %>
        <%= f.file_field :image, accept: "image/jpeg, image/png", class: "block w-full text-2xl border border-gray-300 rounded-lg cursor-pointer bg-black text-white" %>
      </div>
      <button type="submit" class="bg-white w-full text-black font-bold p-4 rounded-lg flex items-center justify-center space-x-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-black">
          <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
        </svg>
        <div>Update Account</div>
      </button>
    </div>
  <% end %>
  <%= link_to reset_password_path, class: "w-full" do %>
    <div class="bg-black text-white border-2 border-white font-bold p-4 rounded-lg text-center mt-4">Change Password</div>
  <% end %>
  <div class="text-white underline font-bold text-center mt-4 w-full" onclick="openDeleteModal()">Delete Account</div>
</div>
<div id="overlay" class="fixed top-0 left-0 w-screen h-screen bg-gray-900 bg-opacity-75 backdrop-blur-sm hidden" onclick="closeModals()"></div>
<div id="deleteModal" class="fixed bottom-0 left-0 w-full bg-black overflow-hidden transition-all duration-500 z-20 rounded-t-xl" style="height: 0;">
  <div class="text-center text-2xl font-bold text-white mt-4">Delete Profile</div>
  <div class="text-center text-white font-thin p-4">Please confirm you want to delete this pet profile</div>

  <div class="p-2 pb-8">
    <div class="bg-black text-yellow-200 border-2 border-yellow-200 font-bold p-4 rounded-lg text-center m-8 w-3/4 mx-auto" onclick="closeModals()">
      Cancel
    </div>
    <%= button_to delete_user_path(current_user), method: :delete, class: "w-full" do %>
      <div class="bg-red-500 text-white font-bold p-4 rounded-lg flex items-center justify-center space-x-2 w-3/4 mx-auto">
        Delete Account
      </div>
    <% end %>
  </div>
</div>


<script>
  function openDeleteModal() {
    const sidenav = document.getElementById("deleteModal");
    document.getElementById("overlay").classList.remove("hidden");
    sidenav.style.height = "auto";
    const height = sidenav.scrollHeight + "px"; 
    sidenav.style.height = "0";
    requestAnimationFrame(() => {
      sidenav.style.height = height;
    });
    sidenav.style.transition = "height 0.5s ease"; 
  }

  function closeModals() {
    document.getElementById("overlay").classList.add("hidden");
    document.getElementById("deleteModal").style.height = "0";
  }
</script>